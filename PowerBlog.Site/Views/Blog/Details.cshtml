@using PowerBlog.Site.Utilities
@model PowerBlog.Site.Models.ViewModels.BlogViewModel
@using PowerBlog.Site.Models
@using Microsoft.AspNetCore.Http
@using Microsoft.EntityFrameworkCore
@inject PowerBlog.Site.Data.ApplicationDbContext dbContext
@{
    var session = Context.Session;
    var userId = (session?.GetString("UserId") != null) ? long.Parse(session.GetString("UserId")) : 0;
}
@section Styles{
    <link rel="stylesheet" href="~/AdminTemplate/assets/fonts/bootstrap/bootstrap-icons.min.css" />
}
<main class="container child:mt-8">
    <section>
        <ul class="flex items-center gap-x-2 text-gray-400 text-sm lg:text-base">
            <li class="flex items-center gap-x-2">
                <a asp-action="Index" asp-controller="Home" asp-area="">صفحه اصلی</a>
                <svg class="w-4 h-4"><use href="#chevron-left"></use></svg>
            </li>
            <li class="flex items-center gap-x-2">
                <a asp-action="Index" asp-controller="Blog" asp-area="">مقالات</a>
                <svg class="w-4 h-4"><use href="#chevron-left"></use></svg>
            </li>
            <li class="flex items-center gap-x-2"><a href="#">@Model.Blog.Title</a></li>
        </ul>
    </section>
    <section class="flex flex-col lg:flex-row items-start gap-4">
        <div class="w-full lg:w-3/4 flex flex-col gap-y-8 px-4 lg:px-8 py-4 rounded-lg bg-white dark:bg-zinc-700 shadow">
            <div class="w-full flex flex-col gap-y-6">
                @if (TempData["ErrorMessage"] != null)
                {
                    <h2 class="font-MorabbaMedium text-lg lg:text-2xl">
                        @TempData["ErrorMessage"]
                    </h2>
                    TempData.Remove("ErrorMessage");
                }
                <div class="flex flex-col lg:flex-row gap-y-3 lg:items-center lg:justify-between">
                    <h1 class="font-MorabbaMedium text-lg lg:text-2xl">
                        @Model.Blog?.Title
                    </h1>
                    <span class="flex items-center gap-x-1 text-green-500 cursor-pointer">
                        <svg class="w-4 h-4"><use href="#share"></use></svg>
                        <p class="font-DanaMedium">اشتراک گذاری</p>
                    </span>
                </div>
                <div class="flex flex-wrap items-center gap-y-3 gap-x-8 text-sm">
                    <span class="flex items-center gap-x-1 text-gray-400">
                        <svg class="w-4 h-4"><use href="#list-bullet"></use></svg>
                        <p>دسته‌بندی : @Model.Blog?.Category?.Name</p>
                    </span>
                    <span class="flex items-center gap-x-1 text-gray-400">
                        <svg class="w-4 h-4"><use href="#user"></use></svg>
                        <p>توسط : @(Model.Blog?.User?.FirstName +" "+ Model.Blog?.User?.LastName)</p>
                    </span>
                    <span class="flex items-center gap-x-1 text-gray-400">
                        <svg class="w-4 h-4"><use href="#calendar"></use></svg>
                        <p>تاریخ انتشار : @Model.Blog?.CreateDate.Value.ToShamsi()</p>
                    </span>
                    @if ((bool)TempData["IsUserAddToFavorite"] == true)
                    {
                        <a asp-action="RemoveFromFavorite" asp-controller="Blog" asp-area="" asp-route-favoriteId="@TempData["FavoriteId"]" class="flex items-center gap-x-1 text-gray-400">
                            <i class="bi bi-heart-fill"></i>
                            <p>حذف از علاقه مندی ها</p>
                        </a>
                        TempData.Remove("IsUserAddToFavorite");
                    }
                    else
                    {
                        <a asp-action="AddToFavorite" asp-controller="Blog" asp-area="" asp-route-blogId="@Model.Blog.Id" class="flex items-center gap-x-1 text-gray-400">
                            <i class="bi bi-heart"></i>
                            <p>افزودن به علاقه مندی ها</p>
                        </a>
                        TempData.Remove("IsUserAddToFavorite");
                    }
                </div>
            </div>
            <div>
                <img class="rounded-lg" src="~/Images/BlogImages/@Model.Blog?.Photo" alt="@Model.Blog?.Title" />
                <p class="mt-3 leading-10 text-gray-600 dark:text-gray-300">@Model.Blog?.TextBody</p>
            </div>
        </div>
        <div class="top-2 lg:sticky w-full lg:w-1/4 child:rounded-lg child:bg-white child:dark:bg-zinc-700 child:shadow child:p-4 space-y-5 child:flex child:flex-col child:gap-y-4">
            <div>
                <h4 class="font-DanaMedium">جدیدترین مقالات :</h4>
                <ul class="w-full child:flex child:items-center child:gap-x-2 child:cursor-pointer space-y-4">
                    @foreach (var item in Model.RecentBlogs!)
                    {
                        if (item.Id != Model.Blog?.Id)
                        {
                            <a asp-action="Details" asp-controller="Blog" asp-route-id="@item.Id">
                            <li>
                                <img class="w-24 h-16 object-cover rounded-lg"
                                     src="~/Images/BlogImages/@item.Photo"
                                     alt="@item.Title" />
                                <a class="flex flex-col gap-y-2">
                                    <p class="line-clamp-1">@item.Title</p>
                                    <span href="#"
                                          class="flex items-center gap-x-1 text-sm text-gray-400">
                                        <svg class="w-4 h-4 mb-1"><use href="#calendar"></use></svg>@item.CreateDate.Value.ToShamsi()
                                    </span>
                                </a>
                            </li>
                            </a>
                        }
                    }
                </ul>
                <a asp-action="Index" asp-controller="Blog" class="main-btn py-1.5 gap-x-1">
                    مشاهده بیشتر
                    <svg class="w-4 h-4">
                        <use href="#chevron-left"></use>
                    </svg>
                </a>
            </div>
            <div>
                <h4 class="font-DanaMedium">دسته بندی :</h4>
                <ul class="child:flex child:items-center child:justify-between child:cursor-pointer space-y-3">
                    @foreach (var item in Model.Categories!)
                    {
                        <li class="group">
                            <a asp-action="BlogOfCategory" asp-controller="Blog" asp-route-id="@item.Id">
                                <span class="flex items-center justify-center gap-x-1 group-hover:pr-2 duration-300 transition-all group-hover:text-green-500">
                                    <p>@item.Name</p>
                                    <svg class="w-4 h-4"><use href="#chevron-left"></use></svg>
                                </span>
                            </a>
                            <span class="w-5 h-5 flex items-center justify-center rounded-lg text-white bg-green-500 text-xs">@item.Blogs?.Count()</span>
                        </li>
                    }
                </ul>
            </div>
        </div>
    </section>
    <section>
        <div class="flex items-center justify-between mb-12">
            <div class="flex flex-col gap-y-2">
                <h2 class="font-MorabbaMedium text-xl lg:text-3xl">مقالات مرتبط</h2>
            </div>
            <div class="flex items-center gap-x-2 child:p-2 child:bg-white child:dark:bg-zinc-700 child:shadow child:rounded-full">
                <button class="prev-slide-best"
                        tabindex="0"
                        aria-label="Previous slide"
                        aria-controls="swiper-wrapper-a5a7f905158c6457">
                    <svg class="w-4 h-4"><use href="#chevron-right"></use></svg>
                </button>
                <button class="next-slide-best"
                        tabindex="0"
                        aria-label="Next slide"
                        aria-controls="swiper-wrapper-a5a7f905158c6457">
                    <svg class="w-4 h-4"><use href="#chevron-left"></use></svg>
                </button>
            </div>
        </div>
        <div class="group"
             dir="rtl">
            <div class="swiper-wrapper rounded-lg mb-2 child:cursor-pointer child:overflow-hidden child:rounded-lg child:bg-white child:dark:bg-zinc-700 child:shadow child:w-64 child:relative"
                 id="swiper-wrapper-a5a7f905158c6457"
                 aria-live="off"
                 style="
              transition-duration: 1000ms;
              transform: translate3d(275.6px, 0px, 0px);
            ">
                @*<div class="swiper-slide group swiper-slide-prev"
                         role="group"
                         aria-label="3 / 6"
                         data-swiper-slide-index="2"
                         style="width: 255.6px; margin-left: 20px">
                        <span class="absolute top-5 right-5 flex items-center justify-center w-8 h-8 text-xs bg-green-500 rounded-full text-white z-30">20%</span><img src="Images/products/p5.png"
                                                                                                                                                                       alt="product-1"
                                                                                                                                                                       class="group-hover:scale-105 duration-300 w-32 h-32 lg:w-48 lg:h-48 mx-auto mb-3" />
                        <div class="px-2 lg:px-4 mb-3">
                            <a href="product-details.html"
                               class="line-clamp-2 font-DanaMedium mb-2 text-sm lg:text-base">قهوه ترک گرمی مقدار 200 گرم رنگ بنفش خط دوم طولانی</a>
                            <div class="flex items-center gap-x-1 lg:gap-x-3">
                                <p class="font-DanaDemiBold text-green-600 dark:text-green-500">
                                    200,000 <span class="font-Dana text-sm">تومان</span>
                                </p>
                                <del class="font-Dana text-xs lg:text-sm text-rose-300 hidden lg:inline">230,000 <span class="">تومان</span></del>
                            </div>
                        </div>
                        <div class="flex items-center justify-between px-2 lg:px-4 mb-3">
                            <div class="flex items-center gap-x-2 child:transition-all child:duration-300">
                                <span class="rounded-full p-2 dark:bg-zinc-800 dark:hover:bg-green-500 bg-gray-100 hover:bg-green-600 hover:text-white">
                                    <svg class="w-4 h-4">
                                        <use href="#shopping-cart"></use>
                                    </svg>
                                </span><span class="hover:text-green-600">
                                    <svg class="w-4 h-4">
                                        <use href="#heart"></use>
                                    </svg>
                                </span>
                            </div>
                            <div class="flex items-center">
                                <svg class="w-4 h-4 text-gray-300"><use href="#star"></use></svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide group swiper-slide-active"
                         role="group"
                         aria-label="4 / 6"
                         data-swiper-slide-index="3"
                         style="width: 255.6px; margin-left: 20px">
                        <span class="absolute top-5 right-5 flex items-center justify-center w-8 h-8 text-xs bg-green-500 rounded-full text-white z-30">20%</span><img src="Images/products/p4.png"
                                                                                                                                                                       alt="product-1"
                                                                                                                                                                       class="group-hover:scale-105 duration-300 w-32 h-32 lg:w-48 lg:h-48 mx-auto mb-3" />
                        <div class="px-2 lg:px-4 mb-3">
                            <a href="product-details.html"
                               class="line-clamp-2 font-DanaMedium mb-2 text-sm lg:text-base">قهوه ترک بن مانو مقدار 250 گرم خط دوم اسم طولانی خط دوم طولانی</a>
                            <div class="flex items-center gap-x-1 lg:gap-x-3">
                                <p class="font-DanaDemiBold text-green-600 dark:text-green-500">
                                    154,000 <span class="font-Dana text-sm">تومان</span>
                                </p>
                                <del class="font-Dana text-xs lg:text-sm text-rose-300 hidden lg:inline">230,000 <span>تومان</span></del>
                            </div>
                        </div>
                        <div class="flex items-center justify-between px-2 lg:px-4 mb-3">
                            <div class="flex items-center gap-x-2 child:transition-all child:duration-300">
                                <span class="rounded-full p-2 dark:bg-zinc-800 dark:hover:bg-green-500 bg-gray-100 hover:bg-green-600 hover:text-white">
                                    <svg class="w-4 h-4">
                                        <use href="#shopping-cart"></use>
                                    </svg>
                                </span><span class="hover:text-green-600">
                                    <svg class="w-4 h-4">
                                        <use href="#heart"></use>
                                    </svg>
                                </span>
                            </div>
                            <div class="flex items-center">
                                <svg class="w-4 h-4 text-gray-300"><use href="#star"></use></svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide group swiper-slide-next"
                         role="group"
                         aria-label="5 / 6"
                         data-swiper-slide-index="4"
                         style="width: 255.6px; margin-left: 20px">
                        <img src="Images/products/p3.png"
                             alt="product-1"
                             class="group-hover:scale-105 duration-300 w-32 h-32 lg:w-48 lg:h-48 mx-auto mb-3" />
                        <div class="px-2 lg:px-4 mb-3">
                            <a href="product-details.html"
                               class="line-clamp-2 font-DanaMedium mb-2 text-sm lg:text-base">دانه قهوه اسپرسو کد 200 مقدار 100 گرم خط دوم طولانی</a>
                            <div class="flex items-center gap-x-1 lg:gap-x-3">
                                <p class="font-DanaDemiBold text-green-600 dark:text-green-500">
                                    80,000 <span class="font-Dana text-sm">تومان</span>
                                </p>
                            </div>
                        </div>
                        <div class="flex items-center justify-between px-2 lg:px-4 mb-3">
                            <div class="flex items-center gap-x-2 child:transition-all child:duration-300">
                                <span class="rounded-full p-2 dark:bg-zinc-800 dark:hover:bg-green-500 bg-gray-100 hover:bg-green-600 hover:text-white">
                                    <svg class="w-4 h-4">
                                        <use href="#shopping-cart"></use>
                                    </svg>
                                </span><span class="hover:text-green-600">
                                    <svg class="w-4 h-4">
                                        <use href="#heart"></use>
                                    </svg>
                                </span>
                            </div>
                            <div class="flex items-center">
                                <svg class="w-4 h-4 text-gray-300"><use href="#star"></use></svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide group"
                         role="group"
                         aria-label="6 / 6"
                         data-swiper-slide-index="5"
                         style="width: 255.6px; margin-left: 20px">
                        <img src="Images/products/p2.png"
                             alt="product-1"
                             class="group-hover:scale-105 duration-300 w-32 h-32 lg:w-48 lg:h-48 mx-auto mb-3" />
                        <div class="px-2 lg:px-4 mb-3">
                            <a href="product-details.html"
                               class="line-clamp-2 font-DanaMedium mb-2 text-sm lg:text-base">قهوه ترک بن مانو مقدار 250 گرم خط دوم اسم طولانی خط دوم طولانی</a>
                            <div class="flex items-center gap-x-1 lg:gap-x-3">
                                <p class="font-Dana text-red-400">فعلا موجود نیست</p>
                            </div>
                        </div>
                        <div class="flex items-center justify-between px-2 lg:px-4 mb-3">
                            <div class="flex items-center gap-x-2 child:transition-all child:duration-300">
                                <span class="rounded-full p-2 dark:bg-zinc-800 dark:hover:bg-green-500 bg-gray-100 hover:bg-green-600 hover:text-white">
                                    <svg class="w-4 h-4">
                                        <use href="#shopping-cart"></use>
                                    </svg>
                                </span><span class="hover:text-green-600">
                                    <svg class="w-4 h-4">
                                        <use href="#heart"></use>
                                    </svg>
                                </span>
                            </div>
                            <div class="flex items-center">
                                <svg class="w-4 h-4 text-gray-300"><use href="#star"></use></svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide group"
                         role="group"
                         aria-label="1 / 6"
                         data-swiper-slide-index="0"
                         style="width: 255.6px; margin-left: 20px">
                        <span class="absolute top-5 right-5 flex items-center justify-center w-8 h-8 text-xs bg-green-500 rounded-full text-white z-30">20%</span><img src="Images/products/p7.png"
                                                                                                                                                                       alt="product-1"
                                                                                                                                                                       class="group-hover:scale-105 duration-300 w-32 h-32 lg:w-48 lg:h-48 mx-auto mb-3" />
                        <div class="px-2 lg:px-4 mb-3">
                            <a href="product-details.html"
                               class="line-clamp-2 font-DanaMedium mb-2 text-sm lg:text-base">قهوه ترک گرمی مقدار 200 گرم رنگ بنفش خط دوم طولانی</a>
                            <div class="flex items-center gap-x-1 lg:gap-x-3">
                                <p class="font-DanaDemiBold text-green-600 dark:text-green-500">
                                    200,000 <span class="font-Dana text-sm">تومان</span>
                                </p>
                                <del class="font-Dana text-xs lg:text-sm text-rose-300 hidden lg:inline">230,000 <span class="">تومان</span></del>
                            </div>
                        </div>
                        <div class="flex items-center justify-between px-2 lg:px-4 mb-3">
                            <div class="flex items-center gap-x-2 child:transition-all child:duration-300">
                                <span class="rounded-full p-2 dark:bg-zinc-800 dark:hover:bg-green-500 bg-gray-100 hover:bg-green-600 hover:text-white">
                                    <svg class="w-4 h-4">
                                        <use href="#shopping-cart"></use>
                                    </svg>
                                </span><span class="hover:text-green-600">
                                    <svg class="w-4 h-4">
                                        <use href="#heart"></use>
                                    </svg>
                                </span>
                            </div>
                            <div class="flex items-center">
                                <svg class="w-4 h-4 text-gray-300"><use href="#star"></use></svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                                <svg class="w-4 h-4 text-yellow-400">
                                    <use href="#star"></use>
                                </svg>
                            </div>
                        </div>
                    </div>*@
                @foreach (var item in Model.RelateBlog!)
                {
                    <div class="group"
                         role="group"
                         aria-label="2 / 6"
                         data-swiper-slide-index="1"
                         style="width: 255.6px; margin-left: 20px">
                        <a asp-action="Details" asp-controller="Blog" asp-area="" asp-route-id="@item.Id">

                            <img src="~/Images/BlogImages/@item.Photo"
                                 alt="@item.Title"
                                 class="group-hover:scale-105 duration-300 w-32 h-32 lg:w-48 lg:h-48 mx-auto mb-3" />
                            <div class="px-2 lg:px-4 mb-3">
                                <a asp-action="Details" asp-controller="Blog" asp-area="" asp-route-id="@item.Id" class="line-clamp-2 font-DanaMedium mb-2 text-sm lg:text-base">@item.Title</a>
                                <div class="flex items-center gap-x-1 lg:gap-x-3">
                                    <p class="font-Dana text-red-400">@item.CreateDate.Value.ToShamsi()</p>
                                </div>
                            </div>
                            @*<div class="flex items-center justify-between px-2 lg:px-4 mb-3">
                                    <div class="flex items-center gap-x-2 child:transition-all child:duration-300">
                                        <span class="rounded-full p-2 dark:bg-zinc-800 dark:hover:bg-green-500 bg-gray-100 hover:bg-green-600 hover:text-white">
                                            <svg class="w-4 h-4">
                                                <use href="#shopping-cart"></use>
                                            </svg>
                                        </span><span class="hover:text-green-600">
                                            <svg class="w-4 h-4">
                                                <use href="#heart"></use>
                                            </svg>
                                        </span>
                                    </div>
                                    <div class="flex items-center">
                                            <svg class="w-4 h-4 text-gray-300"><use href="#star"></use></svg>
                                            <svg class="w-4 h-4 text-yellow-400">
                                                <use href="#star"></use>
                                            </svg>
                                            <svg class="w-4 h-4 text-yellow-400">
                                                <use href="#star"></use>
                                            </svg>
                                            <svg class="w-4 h-4 text-yellow-400">
                                                <use href="#star"></use>
                                            </svg>
                                            <svg class="w-4 h-4 text-yellow-400">
                                                <use href="#star"></use>
                                            </svg>
                                        </div>
                                </div>*@
                        </a>
                    </div>
                }
            </div>
            <span class="swiper-notification"
                  aria-live="assertive"
                  aria-atomic="true"></span>
        </div>
    </section>
    <section class="w-full rounded-lg bg-white dark:bg-zinc-700 shadow p-5">
        <div class="flex items-center gap-x-2 mb-6">
            <h2 class="font-MorabbaMedium text-2xl">دیدگاه ها</h2>
            <p class="text-sm text-blue-500">(@Model.Blog.Comments.Count() دیدگاه)</p>
        </div>
        <div class="flex flex-col lg:flex-row items-start gap-10">
            <div class="lg:w-1/4 flex flex-col w-full">
                <form asp-action="PostComment" asp-controller="Comment" asp-area="" method="post">
                    @if (TempData["ErrorMessage"] != null)
                    {
                        <p class="font-DanaMedium text-lg mb-2">@TempData["ErrorMessage"]</p>
                        TempData.Remove("ErrorMessage");
                    }
                    <p class="font-DanaMedium text-lg mb-2">ثبت دیدگاه</p>
                    <input required type="text" asp-for="@Model.Comment.Title" placeholder="عنوان" class="tailwind-input" />
                    @*<p class="text-gray-500 dark:text-white text-sm mb-4">
                            این محصول را به دیگران پیشنهاد :
                        </p>
                        <div class="grid grid-cols-12 child:col-span-6 gap-4 child:w-full child:flex child:items-center child:justify-center child:gap-x-2 child:rounded-lg child:shadow child:py-2 mb-5 child:font-DanaMedium child:duration-300 child:transition-all">
                            <button class="text-green-600 ring-transparent ring-1 focus:ring-green-600 dark:ring-white/20 dark:focus:ring-green-600">
                                <svg class="w-5 h-5"><use href="#hand-up"></use></svg> میکنم
                            </button>
                            <button class="text-red-500 ring-transparent ring-1 focus:ring-[#EF4343] dark:ring-white/20 dark:focus:ring-[#EF4343]">
                                <svg class="w-5 h-5"><use href="#hand-down"></use></svg> نمیکنم
                            </button>
                        </div>*@
                    <textarea required asp-for="@Model.Comment.TextBody" class="h-24 tailwind-input" placeholder="متن دیدگاه"></textarea>
                    <input type="hidden" asp-for="@Model.Comment.BlogId" value="@Model.Blog.Id" />
                    <button type="submit" class="rounded-lg p-2 bg-green-500 hover:bg-green-600 text-white transition-all">
                        ثبت
                    </button>
                </form>
            </div>
            <ul class="lg:w-3/4 flex flex-col gap-y-2 child:w-full">
                @foreach (var item in Model.Blog.Comments)
                {
                    <li class="child:flex py-4 border-b border-gray-200 child:border-white/20">
                        <div class="flex items-center gap-x-2">
                            <h2 class="font-DanaMedium text-lg mb-1">@item.Title</h2>
                            @*<span class="px-2 py-1 mb-2 rounded-lg bg-green-500 text-white text-xs">خریدار</span>*@
                        </div>
                        <div class="flex-col">
                            @*<h2 class="flex items-center gap-x-1 text-green-500 mb-4">
                                    <svg class="w-4 h-4"><use href="#hand-up"></use></svg> پیشنهاد میشود
                                </h2>*@
                            <p class="text-gray-500 dark:text-gray-200 mb-2 line-clamp-2">@item.TextBody</p>
                        </div>
                        <div class="mt-2 lg:mt-0 flex-col lg:flex-row gap-y-2 lg:items-center justify-between">
                            <div class="flex items-center gap-x-4 text-gray-400 text-sm">
                                <p>@item.CreateDate.Value.ToShamsi()</p>
                                <p>@(item.User.FirstName+" "+item.User.LastName)</p>
                            </div>
                            <div class="flex items-center gap-x-2 flex-wrap mt-2">
                                <p class="text-gray-400 text-sm">
                                    آیا این دیدگاه برایتان مفید بود؟
                                </p>
                                @{
                                    var likes = item.ReactionBlogs?.Count(r => r.LikeOrDisLike == LikeOrDisLike.Like) ?? 0;
                                    var dislikes = item.ReactionBlogs?.Count(r => r.LikeOrDisLike == LikeOrDisLike.DisLike) ?? 0;
                                }

                                <div class="flex items-center gap-x-2 child:flex child:items-center child:gap-x-1 child:rounded-lg child:p-2 child:font-DanaMedium child:duration-300 child:transition-all child:text-sm">
                                    @if (item.ReactionBlogs.FirstOrDefault(r => r.UserId == userId && r.BlogId == Model.Blog.Id && r.CommentId == item.Id) != null)
                                    {
                                        if (item.ReactionBlogs.FirstOrDefault(r => r.UserId == userId && r.BlogId == Model.Blog.Id && r.CommentId == item.Id).LikeOrDisLike == LikeOrDisLike.Like)
                                        {
                                            <a asp-action="RemoveReaction" asp-controller="ReactionBlog" asp-area="" asp-route-reactionId="@item.ReactionBlogs.FirstOrDefault(r => r.UserId == userId && r.BlogId == Model.Blog.Id && r.CommentId == item.Id).Id" class="text-green-600 ring-transparent ring-1 focus:ring-green-600 dark:focus:ring-green-600">
                                                @likes <i class="bi bi-check-square-fill"></i>
                                            </a>
                                            <a asp-action="DisLikeComment" asp-controller="ReactionBlog" asp-area="" asp-route-blogId="@Model.Blog.Id" asp-route-commentId="@item.Id" class="text-red-500 ring-transparent ring-1 focus:ring-[#EF4343] dark:focus:ring-[#EF4343]">
                                                @dislikes <i class="bi bi-x-square"></i>
                                            </a>
                                        }
                                        else
                                        {
                                            <a asp-action="LikeComment" asp-controller="ReactionBlog" asp-area="" asp-route-blogId="@Model.Blog.Id" asp-route-commentId="@item.Id" class="text-green-600 ring-transparent ring-1 focus:ring-green-600 dark:focus:ring-green-600">
                                                @likes <i class="bi bi-check-square"></i>
                                            </a>
                                            <a asp-action="RemoveReaction" asp-controller="ReactionBlog" asp-area="" asp-route-reactionId="@item.ReactionBlogs.FirstOrDefault(r => r.UserId == userId && r.BlogId == Model.Blog.Id && r.CommentId == item.Id).Id" class="text-red-500 ring-transparent ring-1 focus:ring-[#EF4343] dark:focus:ring-[#EF4343]">
                                                @dislikes <i class="bi bi-x-square-fill"></i>
                                            </a>
                                        }
                                    }
                                    else
                                    {
                                        <a asp-action="LikeComment" asp-controller="ReactionBlog" asp-area="" asp-route-blogId="@Model.Blog.Id" asp-route-commentId="@item.Id" class="text-green-600 ring-transparent ring-1 focus:ring-green-600 dark:focus:ring-green-600">
                                            @likes <i class="bi bi-check-square"></i>
                                        </a>
                                        <a asp-action="DisLikeComment" asp-controller="ReactionBlog" asp-area="" asp-route-blogId="@Model.Blog.Id" asp-route-commentId="@item.Id" class="text-red-500 ring-transparent ring-1 focus:ring-[#EF4343] dark:focus:ring-[#EF4343]">
                                            @dislikes <i class="bi bi-x-square"></i>
                                        </a>
                                    }
                                </div>
                            </div>
                        </div>
                    </li>
                }
                @*<li class="child:flex py-4 border-b border-gray-200 child:border-white/20">
                        <div class="flex items-center gap-x-2">
                            <h2 class="font-DanaMedium text-lg mb-1">بسته بندی خوب نبود</h2>
                            <span class="px-2 py-1 mb-2 rounded-lg bg-green-500 text-white text-xs">خریدار</span>
                        </div>
                        <div class="flex-col">
                            <h2 class="flex items-center gap-x-1 text-red-500 mb-4">
                                <svg class="w-4 h-4"><use href="#hand-down"></use></svg> پیشنهاد
                                نمیشود
                            </h2>
                            <p class="text-gray-500 dark:text-gray-200 mb-2">
                                بسته بندی محصول ایراد داشت.
                            </p>
                        </div>
                        <div class="mt-2 lg:mt-0 flex-col lg:flex-row gap-y-2 lg:items-center justify-between">
                            <div class="flex items-center gap-x-4 text-gray-400 text-sm">
                                <p>12 بهمن 1402</p>
                                <p>علی محمدی</p>
                            </div>
                            <div class="flex items-center gap-x-2 flex-wrap mt-2">
                                <p class="text-gray-400 text-sm">
                                    آیا این دیدگاه برایتان مفید بود؟
                                </p>
                                <div class="flex items-center gap-x-2 child:flex child:items-center child:gap-x-1 child:rounded-lg child:p-2 child:font-DanaMedium child:duration-300 child:transition-all child:text-sm">
                                    <button class="text-green-600 ring-transparent ring-1 focus:ring-green-600 dark:focus:ring-green-600">
                                        4 <svg class="w-4 h-4"><use href="#hand-up"></use></svg>
                                    </button>
                                    <button class="text-red-500 ring-transparent ring-1 focus:ring-[#EF4343] dark:focus:ring-[#EF4343]">
                                        15 <svg class="w-4 h-4"><use href="#hand-down"></use></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="child:flex py-4 border-b border-gray-200 child:border-white/20">
                        <div class="flex items-center gap-x-2">
                            <h2 class="font-DanaMedium text-lg mb-1">برشته و تازه بود</h2>
                            <span class="px-2 py-1 mb-2 rounded-lg bg-green-500 text-white text-xs">خریدار</span>
                        </div>
                        <div class="flex-col">
                            <h2 class="flex items-center gap-x-1 text-green-500 mb-4">
                                <svg class="w-4 h-4"><use href="#hand-up"></use></svg> پیشنهاد میشود
                            </h2>
                            <p class="text-gray-500 dark:text-gray-200 mb-2">کیفیت محصول عالیه</p>
                        </div>
                        <div class="mt-2 lg:mt-0 flex-col lg:flex-row gap-y-2 lg:items-center justify-between">
                            <div class="flex items-center gap-x-4 text-gray-400 text-sm">
                                <p>1 بهمن 1402</p>
                                <p>محمد صفدری</p>
                            </div>
                            <div class="flex items-center gap-x-2 flex-wrap mt-2">
                                <p class="text-gray-400 text-sm">
                                    آیا این دیدگاه برایتان مفید بود؟
                                </p>
                                <div class="flex items-center gap-x-2 child:flex child:items-center child:gap-x-1 child:rounded-lg child:p-2 child:font-DanaMedium child:duration-300 child:transition-all child:text-sm">
                                    <button class="text-green-600 ring-transparent ring-1 focus:ring-green-600 dark:focus:ring-green-600">
                                        7 <svg class="w-4 h-4"><use href="#hand-up"></use></svg>
                                    </button>
                                    <button class="text-red-500 ring-transparent ring-1 focus:ring-[#EF4343] dark:focus:ring-[#EF4343]">
                                        5 <svg class="w-4 h-4"><use href="#hand-down"></use></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="hidden-comment-item hidden child:flex py-4 border-b border-gray-200 child:border-white/20">
                        <div class="flex items-center gap-x-2">
                            <h2 class="font-DanaMedium text-lg mb-1">عطر و طعم قهوه عالی</h2>
                            <span class="px-2 py-1 mb-2 rounded-lg bg-green-500 text-white text-xs">خریدار</span>
                        </div>
                        <div class="flex-col">
                            <h2 class="flex items-center gap-x-1 text-green-500 mb-4">
                                <svg class="w-4 h-4"><use href="#hand-up"></use></svg> پیشنهاد میشود
                            </h2>
                            <p class="text-gray-500 dark:text-gray-200 mb-2 line-clamp-2">
                                عالی از هر لحاظ به شدت خریدش رو توصیه میکنم کیفیت محصول خوب بود بسته
                                بندی عالی بود
                            </p>
                        </div>
                        <div class="mt-2 lg:mt-0 flex-col lg:flex-row gap-y-2 lg:items-center justify-between">
                            <div class="flex items-center gap-x-4 text-gray-400 text-sm">
                                <p>11 بهمن 1402</p>
                                <p>امیررضا کریمی</p>
                            </div>
                            <div class="flex items-center gap-x-2 flex-wrap mt-2">
                                <p class="text-gray-400 text-sm">
                                    آیا این دیدگاه برایتان مفید بود؟
                                </p>
                                <div class="flex items-center gap-x-2 child:flex child:items-center child:gap-x-1 child:rounded-lg child:p-2 child:font-DanaMedium child:duration-300 child:transition-all child:text-sm">
                                    <button class="text-green-600 ring-transparent ring-1 focus:ring-green-600 dark:focus:ring-green-600">
                                        78 <svg class="w-4 h-4"><use href="#hand-up"></use></svg>
                                    </button>
                                    <button class="text-red-500 ring-transparent ring-1 focus:ring-[#EF4343] dark:focus:ring-[#EF4343]">
                                        25 <svg class="w-4 h-4"><use href="#hand-down"></use></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="hidden-comment-item hidden child:flex py-4 border-b border-gray-200 child:border-white/20">
                        <div class="flex items-center gap-x-2">
                            <h2 class="font-DanaMedium text-lg mb-1">بسته بندی خوب نبود</h2>
                            <span class="px-2 py-1 mb-2 rounded-lg bg-green-500 text-white text-xs">خریدار</span>
                        </div>
                        <div class="flex-col">
                            <h2 class="flex items-center gap-x-1 text-red-500 mb-4">
                                <svg class="w-4 h-4"><use href="#hand-down"></use></svg> پیشنهاد
                                نمیشود
                            </h2>
                            <p class="text-gray-500 dark:text-gray-200 mb-2">
                                بسته بندی محصول ایراد داشت.
                            </p>
                        </div>
                        <div class="mt-2 lg:mt-0 flex-col lg:flex-row gap-y-2 lg:items-center justify-between">
                            <div class="flex items-center gap-x-4 text-gray-400 text-sm">
                                <p>12 بهمن 1402</p>
                                <p>علی محمدی</p>
                            </div>
                            <div class="flex items-center gap-x-2 flex-wrap mt-2">
                                <p class="text-gray-400 text-sm">
                                    آیا این دیدگاه برایتان مفید بود؟
                                </p>
                                <div class="flex items-center gap-x-2 child:flex child:items-center child:gap-x-1 child:rounded-lg child:p-2 child:font-DanaMedium child:duration-300 child:transition-all child:text-sm">
                                    <button class="text-green-600 ring-transparent ring-1 focus:ring-green-600 dark:focus:ring-green-600">
                                        4 <svg class="w-4 h-4"><use href="#hand-up"></use></svg>
                                    </button>
                                    <button class="text-red-500 ring-transparent ring-1 focus:ring-[#EF4343] dark:focus:ring-[#EF4343]">
                                        15 <svg class="w-4 h-4"><use href="#hand-down"></use></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </li>
                    <li class="hidden-comment-item hidden child:flex py-4 border-b border-gray-200 child:border-white/20">
                        <div class="flex items-center gap-x-2">
                            <h2 class="font-DanaMedium text-lg mb-1">برشته و تازه بود</h2>
                            <span class="px-2 py-1 mb-2 rounded-lg bg-green-500 text-white text-xs">خریدار</span>
                        </div>
                        <div class="flex-col">
                            <h2 class="flex items-center gap-x-1 text-green-500 mb-4">
                                <svg class="w-4 h-4"><use href="#hand-up"></use></svg> پیشنهاد میشود
                            </h2>
                            <p class="text-gray-500 dark:text-gray-200 mb-2">کیفیت محصول عالیه</p>
                        </div>
                        <div class="mt-2 lg:mt-0 flex-col lg:flex-row gap-y-2 lg:items-center justify-between">
                            <div class="flex items-center gap-x-4 text-gray-400 text-sm">
                                <p>1 بهمن 1402</p>
                                <p>محمد صفدری</p>
                            </div>
                            <div class="flex items-center gap-x-2 flex-wrap mt-2">
                                <p class="text-gray-400 text-sm">
                                    آیا این دیدگاه برایتان مفید بود؟
                                </p>
                                <div class="flex items-center gap-x-2 child:flex child:items-center child:gap-x-1 child:rounded-lg child:p-2 child:font-DanaMedium child:duration-300 child:transition-all child:text-sm">
                                    <button class="text-green-600 ring-transparent ring-1 focus:ring-green-600 dark:focus:ring-green-600">
                                        7 <svg class="w-4 h-4"><use href="#hand-up"></use></svg>
                                    </button>
                                    <button class="text-red-500 ring-transparent ring-1 focus:ring-[#EF4343] dark:focus:ring-[#EF4343]">
                                        5 <svg class="w-4 h-4"><use href="#hand-down"></use></svg>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </li>*@
                @*<button class="more-comment-btn w-full flex items-center justify-center gap-x-1 my-4 text-green-600 font-DanaMedium">
                        <p class="more-comment-text">مشاهده بیشتر</p>
                        <svg class="w-4 h-4 more-comment-icon">
                            <use href="#chevron-down"></use>
                        </svg>
                    </button>*@
            </ul>
        </div>
    </section>
</main>
